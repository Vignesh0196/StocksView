{% extends base %}
{% block preamble %}

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
	
	<!-- Jquery-UI CSS -->
	<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.css" crossorigin="anonymous">

	<!-- Bootstrap Select -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">
	
	<!-- Font Awesome -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/js/all.min.js" integrity="sha256-KzZiKy0DWYsnwMF+X1DvQngQ2/FxF7MF3Ff72XcpuPs=" crossorigin="anonymous"></script>
	
	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
	
	<!-- Custom Style Sheet -->
	<link href="bokeh_ta_v1/static/css/custom.min.css" rel="stylesheet">

	<style>
		.modal-backdrop
		{
			opacity:0.1 !important;
		}
		
		.flex_bk{
			background-color: grey;
		}
	</style>

{% endblock %}

{% block contents %}

	<!-- <div id="activity"> -->
    <!-- <div id="act"> -->
        <!-- <div id="div1" class="weighting-category twentyheight">DIV ONE</div> -->
        <!-- <div id="div2" class="weighting-category twentyheight" style="">DIV TWO</div> -->
        <!-- <div id="div3" class="weighting-category twentyheight">DIV THREE</div> -->
        <!-- <div id="div4" class="weighting-category twentyheight">DIV FOUR</div> -->
        <!-- <div id="div5" class="weighting-category twentyheight">DIV FIVE</div> -->
		<!-- <div id="div6" class="weighting-category twentyheight">DIV FIVE</div>       -->
		<!-- <div id="div7" class="weighting-category twentyheight">DIV FIVE</div>       -->
		<!-- <div id="div9" class="weighting-category twentyheight">DIV FIVE</div>       -->
		<!-- <div id="div10" class="weighting-category twentyheight">DIV NINE</div>       -->
    <!-- </div> -->
<!-- </div> -->

	<div class="">
			<div class="d-flex flex-row bd-highlight">
				<div class="p-2 bd-highlight">
					<!-- <select class="selectpicker" data-live-search="true">
						<option data-tokens="Copper">Copper</option>
						<option data-tokens="Silver">Silver</option>
						<option data-tokens="Gold">Gold</option>
					</select> -->
					{{ embed(roots.instruments ) }}
				</div>
				
				<div class="p-2 bd-highlight">
					<button type="button" class="btn btn-light" data-toggle="dropdown">
						D
					</button>
					<div class="dropdown-menu">
						<a class="dropdown-item" href="#">1s</a>
						<a class="dropdown-item" href="#">5s</a>
						<a class="dropdown-item" href="#">15s</a>
						<a class="dropdown-item" href="#">30s</a>
						<div class="dropdown-divider"></div>
						<a class="dropdown-item" href="#">1m</a>
						<a class="dropdown-item" href="#">3m</a>
						<a class="dropdown-item" href="#">5m</a>
						<a class="dropdown-item" href="#">15m</a>
					</div>
				</div>
				
				<div class="p-2 bd-highlight">
					<!-- <button type="button" class="btn btn-light" data-toggle="dropdown"> -->
						<!-- <img src="bokeh_ta_v1/static/images/candle1.webp" style="width:20px"> -->
					<!-- </button> -->
					{{ embed(roots.graphs ) }}
				</div>
				
				<div class="p-2 bd-highlight">
					<button type="button" class="btn btn-light" data-toggle="modal" data-target="#exampleModal">
						<li class="fas fa-chart-line"></li>
					</button>
					
					<!-- Modal -->
					<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
					<div class="modal-dialog" role="document">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title" id="exampleModalLabel">Indicators & Strategies</h5>
								<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">&times;</span>
								</button>
							</div>
							<div class="modal-body">
								<div id='checkbox_indicators'>
									{{ embed(roots.indicators ) }}
								</div>
							</div>
						</div>
					</div>
					</div>
					<!-- Modal End -->
					
				</div>
				
				<div id="toolbox" class="ml-auto p-2">
					{{ embed(roots.sizer ) }}
				</div>
			</div>
			
			
			<div class="" style="display:block; width: 98.5%; height: 91%; position: absolute">
				{{ embed(roots.gridplot ) }}
			</div>
	
	<!-- Container End -->	
	</div>	
	
	
		<div id='test' style='display:None'></div>
		
		{% for item in all_columns %}
			<div id="select_{{ item }}" >
			{{ embed(roots['select_'+item]) }}
			</div>
		{% endfor %}
	
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
	<!-- Bootstrap Select -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
	
	{% block javascript %}
	<script>
		let log_list = [];

		let log = console.log;  //backup log fn
		console.log = (...args) => {  //override log fn
			log_list.push(...args);
			log(...args);
		};
		
		var data;
		var obj;
		var figures = {{ figures | tojson }};
		var indicators = {{ indicators | tojson }};

	</script>
	{% endblock %}

<script src="https://cdn.bokeh.org/bokeh/release/bokeh-2.0.1.min.js"></script>

<script src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-2.0.1.min.js"></script>
<script src="https://cdn.bokeh.org/bokeh/release/bokeh-tables-2.0.1.min.js"></script>
<script src="https://cdn.bokeh.org/bokeh/release/bokeh-api-2.0.1.min.js"></script>

<!-- <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script> -->
<!-- <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.js"></script> -->

<script src='bokeh_ta_v1/static/js/rangeslider.min.js'></script>
<script src='bokeh_ta_v1/static/js/jscolor.js'></script>
<script src='bokeh_ta_v1/static/js/customjs.js'></script>

<script>
 //$('input[type="range"]').rangeslider();
</script>

<script>
<!-- ($('#toolbox').resizable({ -->
                <!-- handles:'e,w,n,s', -->
                <!-- resize:function(event,ui){ -->
                    <!-- figure_view.resize_layout(); -->
                <!-- } -->
            <!-- })); -->
</script>

	
{% endblock %}

